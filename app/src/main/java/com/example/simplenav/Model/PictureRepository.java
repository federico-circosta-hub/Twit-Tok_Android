package com.example.simplenav.Model;

import android.content.Context;
import android.util.Log;

import androidx.annotation.NonNull;
import androidx.room.Room;

import com.example.simplenav.Controller.PictureConverter;
import com.example.simplenav.Controller.UserPictureListener;
import com.example.simplenav.Model.CallApi.ApiInterface;
import com.example.simplenav.Model.CallApi.ServerConnection;
import com.example.simplenav.Model.CallApi.Sid;
import com.example.simplenav.Model.CallApi.SidUid;
import com.example.simplenav.Model.DataBase.UserRepositoryDB;
import com.google.common.util.concurrent.ListenableFuture;

import java.util.concurrent.ExecutionException;

import retrofit2.Call;
import retrofit2.Callback;
import retrofit2.Response;

public class PictureRepository {

    public static final String FAILED = "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";
    public static final String NONE = "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";

    private static final String TAG = "PictureRepository";

    public void getPicture(Context context, Sid sid, int uid, int pversion, UserPictureListener userPictureListener) {
        //cerco nel DB
        UserRepositoryDB db = Room.databaseBuilder(context, UserRepositoryDB.class, "users").build();
        ListenableFuture<User> findingUser = db.userDao().getUser(uid);
        findingUser.addListener(() -> {
            try {
                User userFound = findingUser.get();
                //Log.d(TAG, "nel db presente " + userFound.toString());
                if (userFound != null) {
                    Log.d(TAG, "nome: "+userFound.getName()+" pversion salvata: " + userFound.getPversion() + " attualmente ha: " + pversion);

                    //controllo la pversion
                    if (userFound.pversion < pversion) {
                        //faccio richiesta della picture
                        Log.d(TAG, "pversion minore faccio picRequest");
                        picRequest(sid, uid, db, userPictureListener);
                    } else {
                        Log.d(TAG, "ho già la pic!");
                        userPictureListener.onPictureReady(PictureConverter.createImage(userFound.getPicture()));
                        db.close();
                    }
                } else {
                    //faccio richiesta della picture e inserisco utente nel database
                    Log.d(TAG, "nuovo utente, faccio picRequest");
                    picRequest(sid, uid, db, userPictureListener);
                }
            } catch (ExecutionException | InterruptedException e) {
                Log.d(TAG, "problemi col db");
                //userPictureListener.onPictureReady(PictureConverter.createImage(FAILED));
                e.printStackTrace();
            }
        }, context.getMainExecutor());

    }

    private void picRequest(Sid sid, int uid, UserRepositoryDB db, UserPictureListener userPictureListener) {
        SidUid sidUid = new SidUid();
        sidUid.setUid(uid);
        sidUid.setSid(sid.getSid());
        ApiInterface apiInterface = ServerConnection.newApiInterface();
        Call<User> call = apiInterface.getUser(sidUid);
        call.enqueue(new Callback<User>() {
            @Override
            public void onResponse(@NonNull Call<User> call, @NonNull Response<User> response) {
                Log.d(TAG, ""+sid.getSid());
                assert response.body() != null;
                Log.d(TAG, "" + response.body().getName() + " adesso salvo la mia img " + response.body().getPicture());
                db.userDao().insert(response.body());
                userPictureListener.onPictureReady(PictureConverter.createImage(response.body().getPicture()));
                db.close();
            };
            @Override
            public void onFailure(@NonNull Call<User> call, @NonNull Throwable t) {
                Log.d(TAG, "ho fallito");
                t.printStackTrace();
                userPictureListener.onPictureReady(PictureConverter.createImage(FAILED));
            }
        });
    }
}

